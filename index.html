<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hacker Music Player</title>
<style>
  :root{
    --white:#ffffff; --bg:#000000; --panel:#0b0b0b; --panel2:#141414; --muted:#333; --green:#2cff5a;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:monospace;background:var(--bg);color:var(--white);overflow:hidden;}
  canvas#matrix{position:fixed;inset:0;z-index:0;opacity:.6;}

  .wrap{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px;height:100%;padding:20px}
  .note{background:var(--panel2);border:1px solid var(--white);border-radius:10px;padding:10px 20px;font-size:16px;box-shadow:0 0 10px rgba(255,255,255,.3);max-width:min(800px,95vw);text-align:center}

  .player-card{width:min(760px,95%);background:var(--panel);border:1px solid var(--white);border-radius:12px;padding:12px;box-shadow:0 0 15px rgba(255,255,255,.15);display:flex;gap:12px;align-items:center}
  .cover{width:64px;height:64px;border-radius:8px;overflow:hidden;flex-shrink:0;background:#000}
  .cover img{width:100%;height:100%;object-fit:cover}
  .info{flex:1;display:flex;flex-direction:column}
  .title{font-weight:700;font-size:14px;margin-bottom:6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .bar{display:flex;align-items:center;gap:8px}
  .time{font-size:12px;min-width:36px;text-align:center}
  input[type="range"]{flex:1;height:4px;border-radius:2px;background:var(--muted);-webkit-appearance:none;appearance:none}
  input[type="range"]::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:12px;height:12px;border-radius:50%;background:var(--white);cursor:pointer}
  input[type="range"]::-moz-range-thumb{ width:12px;height:12px;border-radius:50%;background:var(--white);cursor:pointer}
  .controls{display:flex;flex-wrap:wrap;align-items:center;gap:10px;margin-top:8px}
  .btn{background:none;border:none;color:var(--white);font-size:20px;cursor:pointer}
  .btn:hover{opacity:.7}
  .vol-wrap{display:flex;align-items:center;gap:8px}
  #volume{width:120px;display:none}

  /* —á–∏–ø—ã-—Å–ø–∏—Å–æ–∫ */
  .list{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
  .chip{border:1px solid var(--muted);padding:6px 10px;border-radius:999px;cursor:pointer;user-select:none}
  .chip.active{border-color:#fff;box-shadow:0 0 0 1px #fff inset}

  /* –≥–∞–ª–µ—Ä–µ—è —Å –æ–±–ª–æ–∂–∫–∞–º–∏ */
  .gallery{width:min(760px,95%);display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:10px}
  .thumb{position:relative;border:1px solid #333;border-radius:10px;overflow:hidden;background:#000;cursor:pointer}
  .thumb img{width:100%;height:100px;object-fit:cover;display:block;filter:contrast(1.05)}
  .thumb .cap{position:absolute;left:0;right:0;bottom:0;background:linear-gradient(to top,rgba(0,0,0,.7),rgba(0,0,0,.0));padding:6px 8px;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .thumb.active{outline:2px solid #fff; box-shadow:0 0 0 2px #fff inset}
  .thumb::after{content:"‚ñ∂";position:absolute;top:6px;right:8px;font-size:12px;opacity:.0;transition:.2s}
  .thumb.active::after{opacity:.9}

  /* Telegram */
  .tg-float{position:fixed;bottom:-100px;right:25px;width:60px;height:60px;border-radius:50%;background:var(--green);color:#000;display:grid;place-items:center;text-decoration:none;z-index:9999;animation:pulse 2s infinite,slideUp .8s ease forwards;animation-delay:0s,1s}
  .tg-float:hover{transform:scale(1.1)}
  .tg-float svg{width:32px;height:32px;fill:#000}
  @keyframes pulse{0%{box-shadow:0 0 10px rgba(44,255,90,.4)}50%{box-shadow:0 0 25px rgba(44,255,90,.9)}100%{box-shadow:0 0 10px rgba(44,255,90,.4)}}
  @keyframes slideUp{to{bottom:25px}}

  /* –±–∞–Ω–Ω–µ—Ä –∞–≤—Ç–æ–ø–ª–µ—è */
  .gate{position:fixed;inset:auto 20px 20px 20px;z-index:9999;background:#111;color:#fff;border:1px solid #444;border-radius:10px;padding:12px 14px;font:14px/1.3 monospace;display:none}
  .gate button{margin-left:10px;background:#2cff5a;color:#000;border:none;border-radius:6px;padding:6px 10px;cursor:pointer}

  /* –ø—Ä–µ–ª–æ–∞–¥–µ—Ä */
  .loader{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:9998;
    background:rgba(0,0,0,.35);
  }
  .spinner{
    width:42px;height:42px;border:3px solid rgba(255,255,255,.25);border-top-color:#fff;border-radius:50%;
    animation:spin 1s linear infinite
  }
  @keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>
<body>
<canvas id="matrix"></canvas>

<div class="wrap">
  <div class="note">‚úç –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π —Ç–µ–∫—Å—Ç (–∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π).</div>

  <div class="player-card">
    <div class="cover"><img id="cover" src="" alt="cover"></div>
    <div class="info">
      <div class="title" id="trackTitle">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>
      <div class="bar">
        <span class="time" id="curTime">0:00</span>
        <input id="seek" type="range" min="0" max="100" step="0.1" value="0" aria-label="–ø–µ—Ä–µ–º–æ—Ç–∫–∞">
        <span class="time" id="dur">0:00</span>
      </div>
      <div class="controls">
        <button class="btn" id="prev" title="–ü—Ä–µ–¥—ã–¥—É—â–∏–π">‚èÆ</button>
        <button class="btn" id="play" title="–ü—É—Å–∫/–ü–∞—É–∑–∞">‚ñ∂</button>
        <button class="btn" id="next" title="–°–ª–µ–¥—É—é—â–∏–π">‚è≠</button>
        <div class="vol-wrap">
          <button class="btn" id="vol" title="–ì—Ä–æ–º–∫–æ—Å—Ç—å">üîä</button>
          <input id="volume" type="range" min="0" max="1" step="0.01" value="0.8" aria-label="–≥—Ä–æ–º–∫–æ—Å—Ç—å">
        </div>
      </div>
      <div class="list" id="trackList" aria-label="–ü–ª–µ–π–ª–∏—Å—Ç"></div>
    </div>
  </div>

  <!-- –ì–∞–ª–µ—Ä–µ—è —Å –æ–±–ª–æ–∂–∫–∞–º–∏ -->
  <div class="gallery" id="gallery"></div>
</div>

<!-- Telegram -->
<a href="https://t.me/YOUR_USERNAME" target="_blank" class="tg-float" aria-label="–°–≤—è–∑–∞—Ç—å—Å—è –≤ Telegram">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.993 15.682l-.396 5.582c.566 0 .811-.243 1.104-.533l2.648-2.508 5.49 4.018c1.005.553 1.72.263 1.982-.926l3.597-16.79.001-.001c.319-1.482-.536-2.062-1.514-1.701L1.64 10.388c-1.444.563-1.423 1.37-.246 1.74l5.579 1.74 12.947-8.169c.609-.37 1.165-.165.709.236"/></svg>
</a>

<!-- –ë–∞–Ω–Ω–µ—Ä –∞–≤—Ç–æ–ø–ª–µ—è -->
<div class="gate" id="gate">–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –±—Ä–∞—É–∑–µ—Ä–æ–º. –ù–∞–∂–º–∏ ¬´Play¬ª –æ–¥–∏–Ω —Ä–∞–∑ ‚Äî –¥–∞–ª—å—à–µ —Ç—Ä–µ–∫–∏ –±—É–¥—É—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. <button id="gateBtn">Play</button></div>

<!-- –ü—Ä–µ–ª–æ–∞–¥–µ—Ä -->
<div class="loader" id="loader"><div class="spinner"></div></div>

<audio id="audio" preload="metadata"></audio>

<script>
/* ===== –ú–∞—Ç—Ä–∏—Ü–∞ (–±–µ–ª–æ-—á—ë—Ä–Ω–∞—è, –º–µ–¥–ª–µ–Ω–Ω–æ) ===== */
const c=document.getElementById('matrix'),ctx=c.getContext('2d');
function resize(){c.width=innerWidth;c.height=innerHeight;} resize(); addEventListener('resize',resize);
const letters="01<>/|#@".split(""); let font=16, cols=Math.floor(innerWidth/font), drops=Array(cols).fill(1);
(function draw(){
  ctx.fillStyle="rgba(0,0,0,0.1)"; ctx.fillRect(0,0,c.width,c.height);
  ctx.fillStyle="#ffffff"; ctx.font=font+"px monospace";
  drops.forEach((y,i)=>{ const t=letters[Math.floor(Math.random()*letters.length)];
    ctx.fillText(t,i*font,y*font);
    if(y*font>c.height && Math.random()>0.995) drops[i]=0;
    drops[i]+=0.5;
  });
  requestAnimationFrame(draw);
})();

/* ===== –ü–ª–µ–µ—Ä ===== */
const audio=document.getElementById('audio');
const playBtn=document.getElementById('play');
const prevBtn=document.getElementById('prev');
const nextBtn=document.getElementById('next');
const seek=document.getElementById('seek');
const curTime=document.getElementById('curTime');
const dur=document.getElementById('dur');
const titleEl=document.getElementById('trackTitle');
const coverEl=document.getElementById('cover');
const volBtn=document.getElementById('vol');
const volSlider=document.getElementById('volume');
const listEl=document.getElementById('trackList');
const gallery=document.getElementById('gallery');
const gate=document.getElementById('gate');
const gateBtn=document.getElementById('gateBtn');
const loader=document.getElementById('loader');

/* –ü–ª–µ–π–ª–∏—Å—Ç: –ø–µ—Ä–≤—ã–º ‚Äî vklube */
const playlist=[
  {title:"vklube",   url:"audio/vklube.mp3",   cover:"covers/vklube.png"},
  {title:"shalawa",  url:"audio/shalawa.mp3",  cover:"covers/shalawa.png"},
  {title:"kaifusha", url:"audio/kaifusha.mp3", cover:"covers/kaifusha.png"},
  {title:"savethat", url:"audio/savethat.mp3", cover:"covers/savethat.png"},
  {title:"natura",   url:"audio/natura.mp3",   cover:"covers/natura.png"},
];

let index=0, isSeeking=false, unlocked=false, pendingAuto=false;

function renderList(){
  listEl.innerHTML=''; playlist.forEach((t,i)=>{
    const b=document.createElement('button');
    b.className='chip'; b.textContent=`${i+1}. ${t.title}`;
    if(i===index) b.classList.add('active');
    b.addEventListener('click', ()=>{ load(i); autoPlay(); });
    listEl.appendChild(b);
  });
}
function renderGallery(){
  gallery.innerHTML=''; playlist.forEach((t,i)=>{
    const d=document.createElement('div'); d.className='thumb';
    d.innerHTML=`<img src="${t.cover}" alt="${t.title}"><div class="cap">${t.title}</div>`;
    if(i===index) d.classList.add('active');
    d.addEventListener('click', ()=>{ load(i); autoPlay(); });
    gallery.appendChild(d);
  });
}
function highlight(){
  [...listEl.children].forEach((el,i)=> el.classList.toggle('active', i===index));
  [...gallery.children].forEach((el,i)=> el.classList.toggle('active', i===index));
}

function load(i){
  index=(i+playlist.length)%playlist.length;
  showLoader(true);
  audio.src=playlist[index].url;
  titleEl.textContent=playlist[index].title;
  coverEl.src=playlist[index].cover;
  highlight();
}
function fmt(s){ if(isNaN(s)) return "0:00"; const m=Math.floor(s/60); const ss=Math.floor(s%60).toString().padStart(2,'0'); return `${m}:${ss}`; }
function setPlayIcon(p){ playBtn.textContent = p ? "‚è∏" : "‚ñ∂"; }
function showGate(){ gate.style.display='block'; }
function hideGate(){ gate.style.display='none'; unlocked=true; if(pendingAuto){ pendingAuto=false; audio.play().then(()=>setPlayIcon(true)); } }
function autoPlay(){ if(!unlocked){ pendingAuto=true; showGate(); return; } audio.play().then(()=>setPlayIcon(true)); }
function showLoader(v){ loader.style.display = v ? 'flex' : 'none'; }

/* —Å–æ–±—ã—Ç–∏—è */
playBtn.onclick=()=>{ if(audio.paused){ autoPlay(); } else { audio.pause(); setPlayIcon(false); } };
prevBtn.onclick=()=>{ load(index-1); autoPlay(); };
nextBtn.onclick=()=>{ load(index+1); autoPlay(); };

audio.addEventListener('loadedmetadata', ()=>{ dur.textContent=fmt(audio.duration); showLoader(false); });
audio.addEventListener('canplay', ()=>{ showLoader(false); });
audio.addEventListener('play', ()=>{ showLoader(false); });
audio.addEventListener('timeupdate', ()=>{ if(!isSeeking){ seek.value = (audio.currentTime/(audio.duration||1))*100; } curTime.textContent=fmt(audio.currentTime); });
audio.addEventListener('ended', ()=>{ load(index+1); autoPlay(); });

seek.oninput=()=>{ isSeeking=true; };
seek.onchange=()=>{ audio.currentTime = (seek.value/100)*(audio.duration||0); isSeeking=false; };

volBtn.onclick=()=>{ volSlider.style.display = (volSlider.style.display==="none"||!volSlider.style.display) ? "block" : "none"; };
volSlider.oninput=()=>{ audio.volume = volSlider.value; };

gateBtn.onclick=()=>{ hideGate(); autoPlay(); };

/* —Å—Ç–∞—Ä—Ç */
renderList(); renderGallery();
load(0);      // vklube –ø–µ—Ä–≤—ã–º
autoPlay();   // –ø–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–ø–ª–µ—è (–µ—Å–ª–∏ –∑–∞–±–ª–æ—á–µ–Ω–æ ‚Äî –ø–æ–∫–∞–∂–µ–º –±–∞–Ω–Ω–µ—Ä)
</script>
</body>
</html>
